-- Roblox Command UI - Compact Version
-- H·ªá th·ªëng l·ªánh v·ªõi √¥ nh·∫≠p chat, UI nh·ªè g·ªçn

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Bi·∫øn l∆∞u tr·∫°ng th√°i
local isNoclip = false
local originalWalkSpeed = 16
local originalJumpPower = 50
local isMinimized = false

-- T·∫°o ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "CommandUI"
screenGui.ResetOnSpawn = false
screenGui.Parent = playerGui

-- Frame ch√≠nh (ngang v√† nh·ªè h∆°n)
local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, 500, 0, 280)
mainFrame.Position = UDim2.new(0.5, -250, 0.5, -140)
mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
mainFrame.BorderSizePixel = 0
mainFrame.Active = true
mainFrame.Draggable = true
mainFrame.Parent = screenGui

local mainCorner = Instance.new("UICorner")
mainCorner.CornerRadius = UDim.new(0, 10)
mainCorner.Parent = mainFrame

-- Title bar
local titleBar = Instance.new("Frame")
titleBar.Name = "TitleBar"
titleBar.Size = UDim2.new(1, 0, 0, 35)
titleBar.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
titleBar.BorderSizePixel = 0
titleBar.Parent = mainFrame

local titleCorner = Instance.new("UICorner")
titleCorner.CornerRadius = UDim.new(0, 10)
titleCorner.Parent = titleBar

local titleText = Instance.new("TextLabel")
titleText.Size = UDim2.new(1, -100, 1, 0)
titleText.Position = UDim2.new(0, 10, 0, 0)
titleText.BackgroundTransparency = 1
titleText.Text = "‚ö° Command Console"
titleText.TextColor3 = Color3.fromRGB(255, 255, 255)
titleText.TextSize = 14
titleText.TextXAlignment = Enum.TextXAlignment.Left
titleText.Font = Enum.Font.GothamBold
titleText.Parent = titleBar

-- Minimize button
local minimizeButton = Instance.new("TextButton")
minimizeButton.Size = UDim2.new(0, 25, 0, 25)
minimizeButton.Position = UDim2.new(1, -60, 0, 5)
minimizeButton.BackgroundColor3 = Color3.fromRGB(255, 170, 0)
minimizeButton.BorderSizePixel = 0
minimizeButton.Text = "‚àí"
minimizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
minimizeButton.TextSize = 14
minimizeButton.Font = Enum.Font.GothamBold
minimizeButton.Parent = titleBar

local minimizeCorner = Instance.new("UICorner")
minimizeCorner.CornerRadius = UDim.new(0, 6)
minimizeCorner.Parent = minimizeButton

-- Close button
local closeButton = Instance.new("TextButton")
closeButton.Size = UDim2.new(0, 25, 0, 25)
closeButton.Position = UDim2.new(1, -30, 0, 5)
closeButton.BackgroundColor3 = Color3.fromRGB(255, 70, 70)
closeButton.BorderSizePixel = 0
closeButton.Text = "‚úï"
closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
closeButton.TextSize = 12
closeButton.Font = Enum.Font.GothamBold
closeButton.Parent = titleBar

local closeCorner = Instance.new("UICorner")
closeCorner.CornerRadius = UDim.new(0, 6)
closeCorner.Parent = closeButton

-- Content frame (c√≥ th·ªÉ ·∫©n khi minimize)
local contentFrame = Instance.new("Frame")
contentFrame.Name = "ContentFrame"
contentFrame.Size = UDim2.new(1, 0, 1, -35)
contentFrame.Position = UDim2.new(0, 0, 0, 35)
contentFrame.BackgroundTransparency = 1
contentFrame.Parent = mainFrame

-- Chat output frame (nh·ªè h∆°n, ngang)
local outputFrame = Instance.new("Frame")
outputFrame.Name = "OutputFrame"
outputFrame.Size = UDim2.new(0.6, -10, 1, -50)
outputFrame.Position = UDim2.new(0, 10, 0, 5)
outputFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
outputFrame.BorderSizePixel = 0
outputFrame.Parent = contentFrame

local outputCorner = Instance.new("UICorner")
outputCorner.CornerRadius = UDim.new(0, 6)
outputCorner.Parent = outputFrame

local outputScroll = Instance.new("ScrollingFrame")
outputScroll.Size = UDim2.new(1, -8, 1, -8)
outputScroll.Position = UDim2.new(0, 4, 0, 4)
outputScroll.BackgroundTransparency = 1
outputScroll.ScrollBarThickness = 4
outputScroll.ScrollBarImageColor3 = Color3.fromRGB(70, 70, 70)
outputScroll.Parent = outputFrame

local outputLayout = Instance.new("UIListLayout")
outputLayout.SortOrder = Enum.SortOrder.LayoutOrder
outputLayout.Padding = UDim.new(0, 2)
outputLayout.Parent = outputScroll

-- Help frame b√™n ph·∫£i
local helpFrame = Instance.new("Frame")
helpFrame.Name = "HelpFrame"
helpFrame.Size = UDim2.new(0.4, -10, 1, -50)
helpFrame.Position = UDim2.new(0.6, 0, 0, 5)
helpFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
helpFrame.BorderSizePixel = 0
helpFrame.Parent = contentFrame

local helpCorner = Instance.new("UICorner")
helpCorner.CornerRadius = UDim.new(0, 6)
helpCorner.Parent = helpFrame

local helpScroll = Instance.new("ScrollingFrame")
helpScroll.Size = UDim2.new(1, -8, 1, -8)
helpScroll.Position = UDim2.new(0, 4, 0, 4)
helpScroll.BackgroundTransparency = 1
helpScroll.ScrollBarThickness = 4
helpScroll.ScrollBarImageColor3 = Color3.fromRGB(70, 70, 70)
helpScroll.Parent = helpFrame

local helpText = Instance.new("TextLabel")
helpText.Size = UDim2.new(1, -5, 0, 300)
helpText.Position = UDim2.new(0, 2, 0, 0)
helpText.BackgroundTransparency = 1
helpText.Text = [[üí° L·ªÜNH C∆† B·∫¢N:

üèÉ speed [s·ªë] - TƒÉng t·ªëc ƒë·ªô
   unspeed - T·∫Øt t·ªëc ƒë·ªô

ü¶ò jump [s·ªë] - TƒÉng s·ª©c nh·∫£y  
   unjump - T·∫Øt s·ª©c nh·∫£y

‚úàÔ∏è fly - B·∫≠t Vehicle Fly GUI
   (Script t·ª´ GitHub)

üëª noclip - ƒêi xuy√™n t∆∞·ªùng
   unnoclip - T·∫Øt xuy√™n t∆∞·ªùng

üîÑ reset - L√†m m·ªõi nh√¢n v·∫≠t
   clear - X√≥a chat

V√ç D·ª§:
> speed 150
> fly
> noclip
> reset]]
helpText.TextColor3 = Color3.fromRGB(180, 180, 180)
helpText.TextSize = 10
helpText.TextXAlignment = Enum.TextXAlignment.Left
helpText.TextYAlignment = Enum.TextYAlignment.Top
helpText.Font = Enum.Font.Gotham
helpText.TextWrapped = true
helpText.Parent = helpScroll

helpScroll.CanvasSize = UDim2.new(0, 0, 0, 300)

-- Chat input frame
local inputFrame = Instance.new("Frame")
inputFrame.Name = "InputFrame"
inputFrame.Size = UDim2.new(1, -20, 0, 35)
inputFrame.Position = UDim2.new(0, 10, 1, -40)
inputFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
inputFrame.BorderSizePixel = 0
inputFrame.Parent = contentFrame

local inputCorner = Instance.new("UICorner")
inputCorner.CornerRadius = UDim.new(0, 6)
inputCorner.Parent = inputFrame

local chatInput = Instance.new("TextBox")
chatInput.Name = "ChatInput"
chatInput.Size = UDim2.new(1, -60, 1, -8)
chatInput.Position = UDim2.new(0, 8, 0, 4)
chatInput.BackgroundTransparency = 1
chatInput.Text = ""
chatInput.PlaceholderText = "Nh·∫≠p l·ªánh..."
chatInput.PlaceholderColor3 = Color3.fromRGB(120, 120, 120)
chatInput.TextColor3 = Color3.fromRGB(255, 255, 255)
chatInput.TextSize = 12
chatInput.TextXAlignment = Enum.TextXAlignment.Left
chatInput.Font = Enum.Font.Gotham
chatInput.ClearTextOnFocus = false
chatInput.Parent = inputFrame

local sendButton = Instance.new("TextButton")
sendButton.Name = "SendButton"
sendButton.Size = UDim2.new(0, 45, 0, 27)
sendButton.Position = UDim2.new(1, -49, 0, 4)
sendButton.BackgroundColor3 = Color3.fromRGB(60, 120, 220)
sendButton.BorderSizePixel = 0
sendButton.Text = "G·ª≠i"
sendButton.TextColor3 = Color3.fromRGB(255, 255, 255)
sendButton.TextSize = 10
sendButton.Font = Enum.Font.GothamBold
sendButton.Parent = inputFrame

local sendCorner = Instance.new("UICorner")
sendCorner.CornerRadius = UDim.new(0, 4)
sendCorner.Parent = sendButton

-- H√†m th√™m tin nh·∫Øn v√†o output
local function addMessage(message, color)
    local msgFrame = Instance.new("Frame")
    msgFrame.Size = UDim2.new(1, -5, 0, 16)
    msgFrame.BackgroundTransparency = 1
    msgFrame.Parent = outputScroll
    
    local msgText = Instance.new("TextLabel")
    msgText.Size = UDim2.new(1, 0, 1, 0)
    msgText.BackgroundTransparency = 1
    msgText.Text = message
    msgText.TextColor3 = color or Color3.fromRGB(255, 255, 255)
    msgText.TextSize = 10
    msgText.TextXAlignment = Enum.TextXAlignment.Left
    msgText.Font = Enum.Font.Gotham
    msgText.Parent = msgFrame
    
    -- Auto scroll to bottom
    outputScroll.CanvasSize = UDim2.new(0, 0, 0, outputLayout.AbsoluteContentSize.Y + 5)
    outputScroll.CanvasPosition = Vector2.new(0, outputScroll.CanvasSize.Y.Offset)
end

-- C√°c h√†m x·ª≠ l√Ω l·ªánh
local function setSpeed(speed)
    local num = tonumber(speed)
    if num and player.Character and player.Character:FindFirstChild("Humanoid") then
        player.Character.Humanoid.WalkSpeed = num
        addMessage("‚úÖ T·ªëc ƒë·ªô: " .. num, Color3.fromRGB(100, 255, 100))
    else
        addMessage("‚ùå S·ªë kh√¥ng h·ª£p l·ªá!", Color3.fromRGB(255, 100, 100))
    end
end

local function resetSpeed()
    if player.Character and player.Character:FindFirstChild("Humanoid") then
        player.Character.Humanoid.WalkSpeed = originalWalkSpeed
        addMessage("‚úÖ Reset t·ªëc ƒë·ªô: " .. originalWalkSpeed, Color3.fromRGB(100, 255, 100))
    end
end

local function setJump(power)
    local num = tonumber(power)
    if num and player.Character and player.Character:FindFirstChild("Humanoid") then
        player.Character.Humanoid.JumpPower = num
        addMessage("‚úÖ S·ª©c nh·∫£y: " .. num, Color3.fromRGB(100, 255, 100))
    else
        addMessage("‚ùå S·ªë kh√¥ng h·ª£p l·ªá!", Color3.fromRGB(255, 100, 100))
    end
end

local function resetJump()
    if player.Character and player.Character:FindFirstChild("Humanoid") then
        player.Character.Humanoid.JumpPower = originalJumpPower
        addMessage("‚úÖ Reset s·ª©c nh·∫£y: " .. originalJumpPower, Color3.fromRGB(100, 255, 100))
    end
end

local function loadVehicleFly()
    pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/GhostPlayer352/Test4/main/Vehicle%20Fly%20Gui"))()
        addMessage("‚úàÔ∏è ƒê√£ t·∫£i Vehicle Fly GUI", Color3.fromRGB(100, 255, 100))
    end)
end

local noclipConnection
local function startNoclip()
    if isNoclip then 
        addMessage("‚ö†Ô∏è Noclip ƒë√£ b·∫≠t!", Color3.fromRGB(255, 200, 100))
        return 
    end
    
    isNoclip = true
    addMessage("üëª B·∫≠t noclip", Color3.fromRGB(100, 255, 100))
    
    noclipConnection = game:GetService('RunService').Stepped:Connect(function()
        if isNoclip and player.Character then
            for _,v in pairs(player.Character:GetChildren()) do
                if v:IsA('BasePart') then
                    v.CanCollide = false
                end
            end
        end
    end)
end

local function stopNoclip()
    if not isNoclip then
        addMessage("‚ö†Ô∏è Noclip ch∆∞a b·∫≠t!", Color3.fromRGB(255, 200, 100))
        return
    end
    
    isNoclip = false
    if noclipConnection then
        noclipConnection:Disconnect()
    end
    
    if player.Character then
        for _,v in pairs(player.Character:GetChildren()) do
            if v:IsA('BasePart') then
                v.CanCollide = true
            end
        end
    end
    addMessage("‚úÖ T·∫Øt noclip", Color3.fromRGB(100, 255, 100))
end

-- X·ª≠ l√Ω l·ªánh
local function processCommand(input)
    local args = string.split(string.lower(input), " ")
    local command = args[1]
    
    addMessage("> " .. input, Color3.fromRGB(150, 150, 255))
    
    if command == "speed" and args[2] then
        setSpeed(args[2])
    elseif command == "unspeed" then
        resetSpeed()
    elseif command == "jump" and args[2] then
        setJump(args[2])
    elseif command == "unjump" then
        resetJump()
    elseif command == "fly" then
        loadVehicleFly()
    elseif command == "noclip" then
        startNoclip()
    elseif command == "unnoclip" then
        stopNoclip()
    elseif command == "reset" then
        if player.Character and player.Character:FindFirstChild("Humanoid") then
            player.Character.Humanoid.Health = 0
            addMessage("üîÑ Reset nh√¢n v·∫≠t", Color3.fromRGB(100, 255, 100))
        end
    elseif command == "clear" then
        -- Clear chat
        for _,child in pairs(outputScroll:GetChildren()) do
            if child:IsA("Frame") then
                child:Destroy()
            end
        end
        outputScroll.CanvasSize = UDim2.new(0, 0, 0, 0)
    else
        addMessage("‚ùå L·ªánh kh√¥ng t·ªìn t·∫°i!", Color3.fromRGB(255, 100, 100))
    end
end

-- S·ª± ki·ªán g·ª≠i l·ªánh
local function sendCommand()
    local input = chatInput.Text:gsub("^%s*(.-)%s*$", "%1")
    if input ~= "" then
        processCommand(input)
        chatInput.Text = ""
    end
end

sendButton.MouseButton1Click:Connect(sendCommand)
chatInput.FocusLost:Connect(function(enterPressed)
    if enterPressed then
        sendCommand()
    end
end)

-- S·ª± ki·ªán minimize/maximize
minimizeButton.MouseButton1Click:Connect(function()
    if isMinimized then
        -- M·ªü r·ªông
        local tween = TweenService:Create(mainFrame, TweenInfo.new(0.3), {Size = UDim2.new(0, 500, 0, 280)})
        tween:Play()
        contentFrame.Visible = true
        minimizeButton.Text = "‚àí"
        isMinimized = false
    else
        -- Thu g·ªçn
        local tween = TweenService:Create(mainFrame, TweenInfo.new(0.3), {Size = UDim2.new(0, 500, 0, 35)})
        tween:Play()
        contentFrame.Visible = false
        minimizeButton.Text = "+"
        isMinimized = true
    end
end)

-- S·ª± ki·ªán ƒë√≥ng
closeButton.MouseButton1Click:Connect(function()
    screenGui:Destroy()
end)

-- Ph√≠m t·∫Øt F1
UserInputService.InputBegan:Connect(function(input)
    if input.KeyCode == Enum.KeyCode.F1 then
        screenGui.Enabled = not screenGui.Enabled
    end
end)

-- Welcome message
addMessage("‚ö° Console s·∫µn s√†ng!", Color3.fromRGB(100, 255, 100))

print("Compact Command Console loaded! Press F1 to toggle.")