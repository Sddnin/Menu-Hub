-- Mila Command UI for Roblox with Commands
-- Created by Mila

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local Lighting = game:GetService("Lighting")
local TeleportService = game:GetService("TeleportService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")
local mouse = player:GetMouse()

-- Variables for features
local noclipEnabled = false
local espEnabled = false
local infJumpEnabled = false
local flyEnabled = false
local originalWalkSpeed = 16
local originalJumpPower = 50
local noclipConnection = nil
local espConnection = nil
local infJumpConnection = nil
local flyConnection = nil
local currentCamera = workspace.CurrentCamera
local bodyVelocity = nil
local bodyAngularVelocity = nil
local savedPositions = {}
local visualEffects = {}
local originalGravity = workspace.Gravity

-- ESP Variables
local espFolder = Instance.new("Folder")
espFolder.Name = "ESPFolder"
espFolder.Parent = workspace

-- T·∫°o ScreenGui ch√≠nh
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "MilaCommandGUI"
screenGui.Parent = playerGui
screenGui.ResetOnSpawn = false

-- Frame ch√≠nh
local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, 500, 0, 400)
mainFrame.Position = UDim2.new(0.5, -250, 0.5, -200)
mainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
mainFrame.BorderSizePixel = 0
mainFrame.Parent = screenGui

-- Bo tr√≤n g√≥c
local mainCorner = Instance.new("UICorner")
mainCorner.CornerRadius = UDim.new(0, 10)
mainCorner.Parent = mainFrame

-- Hi·ªáu ·ª©ng ƒë·ªï b√≥ng
local shadow = Instance.new("Frame")
shadow.Name = "Shadow"
shadow.Size = UDim2.new(1, 6, 1, 6)
shadow.Position = UDim2.new(0, -3, 0, -3)
shadow.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
shadow.BackgroundTransparency = 0.5
shadow.ZIndex = mainFrame.ZIndex - 1
shadow.Parent = mainFrame

local shadowCorner = Instance.new("UICorner")
shadowCorner.CornerRadius = UDim.new(0, 10)
shadowCorner.Parent = shadow

-- Header (thanh ti√™u ƒë·ªÅ)
local header = Instance.new("Frame")
header.Name = "Header"
header.Size = UDim2.new(1, 0, 0, 40)
header.Position = UDim2.new(0, 0, 0, 0)
header.BackgroundColor3 = Color3.fromRGB(50, 150, 255)
header.BorderSizePixel = 0
header.Parent = mainFrame

local headerCorner = Instance.new("UICorner")
headerCorner.CornerRadius = UDim.new(0, 10)
headerCorner.Parent = header

-- T·∫°o ph·∫ßn d∆∞·ªõi header ph·∫≥ng
local headerBottom = Instance.new("Frame")
headerBottom.Size = UDim2.new(1, 0, 0, 10)
headerBottom.Position = UDim2.new(0, 0, 1, -10)
headerBottom.BackgroundColor3 = Color3.fromRGB(50, 150, 255)
headerBottom.BorderSizePixel = 0
headerBottom.Parent = header

-- Ti√™u ƒë·ªÅ
local title = Instance.new("TextLabel")
title.Name = "Title"
title.Size = UDim2.new(1, -80, 1, 0)
title.Position = UDim2.new(0, 10, 0, 0)
title.BackgroundTransparency = 1
title.Text = "üåü Mila Command"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.TextScaled = true
title.Font = Enum.Font.GothamBold
title.TextXAlignment = Enum.TextXAlignment.Left
title.Parent = header

-- N√∫t thu g·ªçn/ph√≥ng to
local minimizeBtn = Instance.new("TextButton")
minimizeBtn.Name = "MinimizeButton"
minimizeBtn.Size = UDim2.new(0, 30, 0, 30)
minimizeBtn.Position = UDim2.new(1, -65, 0, 5)
minimizeBtn.BackgroundColor3 = Color3.fromRGB(255, 193, 7)
minimizeBtn.Text = "‚ûñ"
minimizeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
minimizeBtn.TextScaled = true
minimizeBtn.Font = Enum.Font.GothamBold
minimizeBtn.BorderSizePixel = 0
minimizeBtn.Parent = header

local minimizeBtnCorner = Instance.new("UICorner")
minimizeBtnCorner.CornerRadius = UDim.new(0, 5)
minimizeBtnCorner.Parent = minimizeBtn

-- N√∫t ƒë√≥ng
local closeBtn = Instance.new("TextButton")
closeBtn.Name = "CloseButton"
closeBtn.Size = UDim2.new(0, 30, 0, 30)
closeBtn.Position = UDim2.new(1, -30, 0, 5)
closeBtn.BackgroundColor3 = Color3.fromRGB(220, 53, 69)
closeBtn.Text = "‚ùå"
closeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
closeBtn.TextScaled = true
closeBtn.Font = Enum.Font.Gotham
closeBtn.BorderSizePixel = 0
closeBtn.Parent = header

local closeBtnCorner = Instance.new("UICorner")
closeBtnCorner.CornerRadius = UDim.new(0, 5)
closeBtnCorner.Parent = closeBtn

-- N·ªôi dung ch√≠nh
local contentFrame = Instance.new("Frame")
contentFrame.Name = "Content"
contentFrame.Size = UDim2.new(1, -20, 1, -60)
contentFrame.Position = UDim2.new(0, 10, 0, 50)
contentFrame.BackgroundTransparency = 1
contentFrame.Parent = mainFrame

-- √î nh·∫≠p l·ªánh
local commandInput = Instance.new("TextBox")
commandInput.Name = "CommandInput"
commandInput.Size = UDim2.new(1, -80, 0, 35)
commandInput.Position = UDim2.new(0, 0, 1, -45)
commandInput.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
commandInput.Text = ""
commandInput.PlaceholderText = "Nh·∫≠p l·ªánh... (fb, nc, sp 50, tp player, v player, etc.)"
commandInput.PlaceholderColor3 = Color3.fromRGB(150, 150, 150)
commandInput.TextColor3 = Color3.fromRGB(255, 255, 255)
commandInput.TextScaled = true
commandInput.Font = Enum.Font.Gotham
commandInput.BorderSizePixel = 0
commandInput.Parent = contentFrame

local inputCorner = Instance.new("UICorner")
inputCorner.CornerRadius = UDim.new(0, 5)
inputCorner.Parent = commandInput

-- N√∫t th·ª±c thi
local executeBtn = Instance.new("TextButton")
executeBtn.Name = "ExecuteButton"
executeBtn.Size = UDim2.new(0, 70, 0, 35)
executeBtn.Position = UDim2.new(1, -70, 1, -45)
executeBtn.BackgroundColor3 = Color3.fromRGB(40, 167, 69)
executeBtn.Text = "Ch·∫°y"
executeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
executeBtn.TextScaled = true
executeBtn.Font = Enum.Font.GothamBold
executeBtn.BorderSizePixel = 0
executeBtn.Parent = contentFrame

local executeBtnCorner = Instance.new("UICorner")
executeBtnCorner.CornerRadius = UDim.new(0, 5)
executeBtnCorner.Parent = executeBtn

-- Khung hi·ªÉn th·ªã k·∫øt qu·∫£
local outputFrame = Instance.new("ScrollingFrame")
outputFrame.Name = "OutputFrame"
outputFrame.Size = UDim2.new(1, 0, 1, -55)
outputFrame.Position = UDim2.new(0, 0, 0, 0)
outputFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
outputFrame.BorderSizePixel = 0
outputFrame.ScrollBarThickness = 8
outputFrame.ScrollBarImageColor3 = Color3.fromRGB(100, 100, 100)
outputFrame.Parent = contentFrame

local outputCorner = Instance.new("UICorner")
outputCorner.CornerRadius = UDim.new(0, 5)
outputCorner.Parent = outputFrame

-- TextLabel cho output
local outputText = Instance.new("TextLabel")
outputText.Name = "OutputText"
outputText.Size = UDim2.new(1, -10, 0, 0)
outputText.Position = UDim2.new(0, 5, 0, 5)
outputText.BackgroundTransparency = 1
outputText.Text = "üí´ Mila Command - Phi√™n b·∫£n n√¢ng cao!\nüìù C√°c l·ªánh c√≥ s·∫µn:\nüîÜ fb/unfb - Fullbright | nofog/unfog - No Fog\nüëª nc/unnc - Noclip | grty [s·ªë]/ungrty - Gravity\n‚ö° sp [s·ªë]/unsp - Speed | wsp [s·ªë]/unwsp - WalkSpeed\nü¶ò jp [s·ªë]/unjp - Jump | infj/uninfj - Infinite Jump\nüëÅÔ∏è es/unes - ESP | v [t√™n]/unv - View\nüìç tp [t√™n] - Teleport | go [t√™n]/ungo - Fly to Player\nüíæ savepos [t√™n] - L∆∞u v·ªã tr√≠ | loadpos [t√™n] - T·∫£i v·ªã tr√≠\nüìä serverinfo - Th√¥ng tin server | jobid - Copy Job ID | placeid - Copy Place ID\nüìç getpos - L·∫•y v·ªã tr√≠ hi·ªán t·∫°i | goto [x] [y] [z] - ƒê·∫øn t·ªça ƒë·ªô\n‚è∞ time [gi·ªù] - ƒê·∫∑t th·ªùi gian (0-24)\n‚ú® smoke/fire/trail/glow - Hi·ªáu ·ª©ng visual\nüîÑ rejoin - Rejoin | serverhop - Server Hop | help - Tr·ª£ gi√∫p"
outputText.TextColor3 = Color3.fromRGB(200, 200, 200)
outputText.TextScaled = false
outputText.TextSize = 12
outputText.Font = Enum.Font.Gotham
outputText.TextXAlignment = Enum.TextXAlignment.Left
outputText.TextYAlignment = Enum.TextYAlignment.Top
outputText.TextWrapped = true
outputText.Parent = outputFrame

-- Variables cho dragging
local dragging = false
local dragStart = nil
local startPos = nil

-- Variables cho minimize
local isMinimized = false
local originalSize = mainFrame.Size

-- COMMAND FUNCTIONS
-- Fullbright
local function setFullbright(enabled)
    if enabled then
        Lighting.Brightness = 2
        Lighting.ClockTime = 14
        Lighting.FogEnd = 100000
        Lighting.GlobalShadows = false
        Lighting.OutdoorAmbient = Color3.fromRGB(128, 128, 128)
    else
        Lighting.Brightness = 1
        Lighting.ClockTime = 12
        Lighting.FogEnd = 1000
        Lighting.GlobalShadows = true
        Lighting.OutdoorAmbient = Color3.fromRGB(70, 70, 70)
    end
end

-- Noclip
local function setNoclip(enabled)
    noclipEnabled = enabled
    if enabled then
        noclipConnection = RunService.Stepped:Connect(function()
            if player.Character and player.Character:FindFirstChild("Humanoid") then
                for _, part in pairs(player.Character:GetChildren()) do
                    if part:IsA("BasePart") then
                        part.CanCollide = false
                    end
                end
            end
        end)
    else
        if noclipConnection then
            noclipConnection:Disconnect()
        end
        if player.Character then
            for _, part in pairs(player.Character:GetChildren()) do
                if part:IsA("BasePart") and part.Name ~= "HumanoidRootPart" then
                    part.CanCollide = true
                end
            end
        end
    end
end

-- ESP
local function createESP(targetPlayer)
    if not targetPlayer.Character or not targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
        return
    end

    local char = targetPlayer.Character
    local rootPart = char.HumanoidRootPart

    local billboard = Instance.new("BillboardGui")
    billboard.Name = targetPlayer.Name .. "_ESP"
    billboard.Adornee = rootPart
    billboard.Size = UDim2.new(0, 200, 0, 50)
    billboard.StudsOffset = Vector3.new(0, 3, 0)
    billboard.AlwaysOnTop = true
    billboard.Parent = espFolder

    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(1, 0, 1, 0)
    frame.BackgroundTransparency = 0.5
    frame.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
    frame.BorderSizePixel = 0
    frame.Parent = billboard

    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 5)
    corner.Parent = frame

    local nameLabel = Instance.new("TextLabel")
    nameLabel.Size = UDim2.new(1, 0, 0.6, 0)
    nameLabel.Position = UDim2.new(0, 0, 0, 0)
    nameLabel.BackgroundTransparency = 1
    nameLabel.Text = targetPlayer.Name
    nameLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    nameLabel.TextScaled = true
    nameLabel.Font = Enum.Font.GothamBold
    nameLabel.Parent = frame

    local distanceLabel = Instance.new("TextLabel")
    distanceLabel.Size = UDim2.new(1, 0, 0.4, 0)
    distanceLabel.Position = UDim2.new(0, 0, 0.6, 0)
    distanceLabel.BackgroundTransparency = 1
    distanceLabel.Text = "0 studs"
    distanceLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
    distanceLabel.TextScaled = true
    distanceLabel.Font = Enum.Font.Gotham
    distanceLabel.Parent = frame

    return billboard, distanceLabel
end

local function setESP(enabled)
    if enabled then
        espConnection = RunService.Heartbeat:Connect(function()
            for _, targetPlayer in pairs(Players:GetPlayers()) do
                if targetPlayer ~= player and targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
                    local existingESP = espFolder:FindFirstChild(targetPlayer.Name .. "_ESP")
                    if not existingESP then
                        createESP(targetPlayer)
                    else
                        -- Update distance
                        local billboard = existingESP
                        local distanceLabel = billboard.Frame:FindFirstChild("TextLabel")
                        if distanceLabel and distanceLabel.Name ~= "TextLabel" then
                            distanceLabel = billboard.Frame:GetChildren()[3] -- Distance label
                        end
                        
                        if player.Character and player.Character:FindFirstChild("HumanoidRootPart") and distanceLabel then
                            local distance = (player.Character.HumanoidRootPart.Position - targetPlayer.Character.HumanoidRootPart.Position).Magnitude
                            distanceLabel.Text = math.floor(distance) .. " studs"
                        end
                    end
                end
            end
        end)
    else
        if espConnection then
            espConnection:Disconnect()
        end
        espFolder:ClearAllChildren()
    end
end

-- Infinite Jump
local function setInfiniteJump(enabled)
    if enabled then
        infJumpConnection = UserInputService.JumpRequest:Connect(function()
            if player.Character and player.Character:FindFirstChild("Humanoid") then
                player.Character.Humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
            end
        end)
    else
        if infJumpConnection then
            infJumpConnection:Disconnect()
        end
    end
end

-- Fly to Player
local function flyToPlayer(targetName, enabled)
    local targetPlayer = nil
    for _, p in pairs(Players:GetPlayers()) do
        if string.lower(p.Name):find(string.lower(targetName)) or string.lower(p.DisplayName):find(string.lower(targetName)) then
            targetPlayer = p
            break
        end
    end
    
    if not targetPlayer then return false end
    if not targetPlayer.Character or not targetPlayer.Character:FindFirstChild("HumanoidRootPart") then return false end
    if not player.Character or not player.Character:FindFirstChild("HumanoidRootPart") then return false end
    
    if enabled then
        local rootPart = player.Character.HumanoidRootPart
        
        bodyVelocity = Instance.new("BodyVelocity")
        bodyVelocity.MaxForce = Vector3.new(4000, 4000, 4000)
        bodyVelocity.Velocity = Vector3.new(0, 0, 0)
        bodyVelocity.Parent = rootPart
        
        bodyAngularVelocity = Instance.new("BodyAngularVelocity")
        bodyAngularVelocity.MaxTorque = Vector3.new(4000, 4000, 4000)
        bodyAngularVelocity.AngularVelocity = Vector3.new(0, 0, 0)
        bodyAngularVelocity.Parent = rootPart
        
        flyConnection = RunService.Heartbeat:Connect(function()
            if targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
                local direction = (targetPlayer.Character.HumanoidRootPart.Position - rootPart.Position).Unit
                bodyVelocity.Velocity = direction * 50
            end
        end)
    else
        if flyConnection then
            flyConnection:Disconnect()
        end
        if bodyVelocity then
            bodyVelocity:Destroy()
            bodyVelocity = nil
        end
        if bodyAngularVelocity then
            bodyAngularVelocity:Destroy()
            bodyAngularVelocity = nil
        end
    end
    
    return true
end

-- No Fog
local function setNoFog(enabled)
    if enabled then
        Lighting.FogEnd = 100000
        Lighting.FogStart = 0
    else
        Lighting.FogEnd = 1000
        Lighting.FogStart = 0
    end
end

-- Gravity
local function setGravity(value)
    if value then
        workspace.Gravity = value
    else
        workspace.Gravity = originalGravity
    end
end

-- Time
local function setTime(hour)
    if hour then
        Lighting.ClockTime = hour
    end
end

-- Save/Load Position
local function savePosition(name)
    if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
        savedPositions[name] = player.Character.HumanoidRootPart.CFrame
        return true
    end
    return false
end

local function loadPosition(name)
    if savedPositions[name] and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
        player.Character.HumanoidRootPart.CFrame = savedPositions[name]
        return true
    end
    return false
end

-- Teleport to coordinates
local function teleportToCoords(x, y, z)
    if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
        player.Character.HumanoidRootPart.CFrame = CFrame.new(Vector3.new(x, y, z))
        return true
    end
    return false
end

-- Get current position
local function getCurrentPosition()
    if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
        local pos = player.Character.HumanoidRootPart.Position
        return pos.X, pos.Y, pos.Z
    end
    return nil, nil, nil
end

-- Server Info
local function getServerInfo()
    local info = {
        JobId = game.JobId,
        PlaceId = game.PlaceId,
        Players = #Players:GetPlayers(),
        MaxPlayers = Players.MaxPlayers,
        GameName = game:GetService("MarketplaceService"):GetProductInfo(game.PlaceId).Name
    }
    return info
end

-- Copy to clipboard (simulated by showing the text for manual copy)
local function copyToOutput(text, label)
    addOutput("üìã " .. label .. ": " .. text)
    addOutput("üí° ƒê√£ hi·ªÉn th·ªã " .. label .. " ƒë·ªÉ b·∫°n copy th·ªß c√¥ng!")
end
    for _, p in pairs(Players:GetPlayers()) do
        if string.lower(p.Name):find(string.lower(name)) or string.lower(p.DisplayName):find(string.lower(name)) then
            return p
        end
    end
    return nil
end

-- H√†m c·∫≠p nh·∫≠t k√≠ch th∆∞·ªõc output text
local function updateOutputSize()
    local textService = game:GetService("TextService")
    local textSize = textService:GetTextSize(outputText.Text, 12, Enum.Font.Gotham, Vector2.new(outputText.AbsoluteSize.X, math.huge))
    outputText.Size = UDim2.new(1, -10, 0, math.max(textSize.Y + 10, outputFrame.AbsoluteSize.Y))
    outputFrame.CanvasSize = UDim2.new(0, 0, 0, textSize.Y + 20)
end

-- G·ªçi function khi text thay ƒë·ªïi
outputText:GetPropertyChangedSignal("Text"):Connect(updateOutputSize)
outputFrame:GetPropertyChangedSignal("AbsoluteSize"):Connect(updateOutputSize)

-- H√†m th√™m text v√†o output
local function addOutput(text)
    outputText.Text = outputText.Text .. "\n> " .. text
    updateOutputSize()
    -- Scroll xu·ªëng d∆∞·ªõi
    outputFrame.CanvasPosition = Vector2.new(0, outputFrame.CanvasSize.Y.Offset)
end

-- COMMAND PROCESSOR
local function processCommand(cmd)
    local args = string.split(cmd, " ")
    local command = string.lower(args[1])
    
    -- No Fog
    elseif command == "nofog" then
        setNoFog(true)
        addOutput("‚úÖ No Fog ƒë√£ B·∫¨T")
        
    elseif command == "unfog" then
        setNoFog(false)
        addOutput("‚ùå No Fog ƒë√£ T·∫ÆT")
        
    -- Gravity
    elseif command == "grty" or command == "gravity" then
        local gravity = tonumber(args[2]) or 50
        setGravity(gravity)
        addOutput("üåç Gravity ƒë·∫∑t th√†nh " .. gravity)
        
    elseif command == "ungrty" or command == "ungravity" then
        setGravity()
        addOutput("‚ùå Gravity ƒë√£ reset v·ªÅ " .. originalGravity)
        
    -- Time
    elseif command == "time" then
        local hour = tonumber(args[2])
        if hour and hour >= 0 and hour <= 24 then
            setTime(hour)
            addOutput("‚è∞ Th·ªùi gian ƒë·∫∑t th√†nh " .. hour .. ":00")
        else
            addOutput("‚ùå Gi·ªù ph·∫£i t·ª´ 0-24. V√≠ d·ª•: time 12")
        end
        
    -- Save Position
    elseif command == "savepos" then
        if args[2] then
            if savePosition(args[2]) then
                addOutput("üíæ ƒê√£ l∆∞u v·ªã tr√≠: " .. args[2])
            else
                addOutput("‚ùå Kh√¥ng th·ªÉ l∆∞u v·ªã tr√≠")
            end
        else
            addOutput("‚ùå C√°ch d√πng: savepos [t√™n]")
        end
        
    -- Load Position
    elseif command == "loadpos" then
        if args[2] then
            if loadPosition(args[2]) then
                addOutput("üìÇ ƒê√£ t·∫£i v·ªã tr√≠: " .. args[2])
            else
                addOutput("‚ùå Kh√¥ng t√¨m th·∫•y v·ªã tr√≠ ƒë√£ l∆∞u: " .. args[2])
            end
        else
            addOutput("‚ùå C√°ch d√πng: loadpos [t√™n]")
        end
        
    -- Server Info
    elseif command == "serverinfo" then
        local info = getServerInfo()
        addOutput("üìä TH√îNG TIN SERVER:")
        addOutput("üéÆ Game: " .. info.GameName)
        addOutput("üë• Ng∆∞·ªùi ch∆°i: " .. info.Players .. "/" .. info.MaxPlayers)
        addOutput("üÜî Place ID: " .. info.PlaceId)
        addOutput("üíº Job ID: " .. info.JobId)
        
    -- Copy Job ID
    elseif command == "jobid" then
        copyToOutput(game.JobId, "Job ID")
        
    -- Copy Place ID
    elseif command == "placeid" then
        copyToOutput(tostring(game.PlaceId), "Place ID")
        
    -- Get Position
    elseif command == "getpos" then
        local x, y, z = getCurrentPosition()
        if x then
            addOutput("üìç V·ªä TR√ç HI·ªÜN T·∫†I:")
            addOutput("X: " .. math.floor(x))
            addOutput("Y: " .. math.floor(y)) 
            addOutput("Z: " .. math.floor(z))
        else
            addOutput("‚ùå Kh√¥ng th·ªÉ l·∫•y v·ªã tr√≠")
        end
        
    -- Goto Coordinates
    elseif command == "goto" then
        local x = tonumber(args[2])
        local y = tonumber(args[3])
        local z = tonumber(args[4])
        if x and y and z then
            if teleportToCoords(x, y, z) then
                addOutput("üìç ƒê√£ teleport ƒë·∫øn t·ªça ƒë·ªô: " .. x .. ", " .. y .. ", " .. z)
            else
                addOutput("‚ùå Kh√¥ng th·ªÉ teleport")
            end
        else
            addOutput("‚ùå C√°ch d√πng: goto [x] [y] [z]")
        end
        
    -- Visual Effects
    elseif command == "smoke" then
        if createVisualEffect("smoke") then
            addOutput("üí® Hi·ªáu ·ª©ng kh√≥i ƒë√£ B·∫¨T")
        else
            addOutput("‚ùå Kh√¥ng th·ªÉ t·∫°o hi·ªáu ·ª©ng kh√≥i")
        end
        
    elseif command == "unsmoke" then
        if removeVisualEffect("smoke") then
            addOutput("‚ùå Hi·ªáu ·ª©ng kh√≥i ƒë√£ T·∫ÆT")
        end
        
    elseif command == "fire" then
        if createVisualEffect("fire") then
            addOutput("üî• Hi·ªáu ·ª©ng l·ª≠a ƒë√£ B·∫¨T")
        else
            addOutput("‚ùå Kh√¥ng th·ªÉ t·∫°o hi·ªáu ·ª©ng l·ª≠a")
        end
        
    elseif command == "unfire" then
        if removeVisualEffect("fire") then
            addOutput("‚ùå Hi·ªáu ·ª©ng l·ª≠a ƒë√£ T·∫ÆT")
        end
        
    elseif command == "trail" then
        if createVisualEffect("trail") then
            addOutput("‚ú® Hi·ªáu ·ª©ng trail ƒë√£ B·∫¨T")
        else
            addOutput("‚ùå Kh√¥ng th·ªÉ t·∫°o hi·ªáu ·ª©ng trail")
        end
        
    elseif command == "untrail" then
        if removeVisualEffect("trail") then
            addOutput("‚ùå Hi·ªáu ·ª©ng trail ƒë√£ T·∫ÆT")
        end
        
    elseif command == "glow" then
        if createVisualEffect("glow") then
            addOutput("üí° Hi·ªáu ·ª©ng glow ƒë√£ B·∫¨T")
        else
            addOutput("‚ùå Kh√¥ng th·ªÉ t·∫°o hi·ªáu ·ª©ng glow")
        end
        
    elseif command == "unglow" then
        if removeVisualEffect("glow") then
            addOutput("‚ùå Hi·ªáu ·ª©ng glow ƒë√£ T·∫ÆT")
        end
    if command == "fb" or command == "fullbright" then
        setFullbright(true)
        addOutput("‚úÖ Fullbright ƒë√£ B·∫¨T")
        
    elseif command == "unfb" or command == "unfullbright" then
        setFullbright(false)
        addOutput("‚ùå Fullbright ƒë√£ T·∫ÆT")
        
    -- Noclip
    elseif command == "nc" or command == "noclip" then
        setNoclip(true)
        addOutput("‚úÖ Noclip ƒë√£ B·∫¨T")
        
    elseif command == "unnc" or command == "unnoclip" then
        setNoclip(false)
        addOutput("‚ùå Noclip ƒë√£ T·∫ÆT")
        
    -- Speed
    elseif command == "sp" or command == "speed" then
        local speed = tonumber(args[2]) or 50
        if player.Character and player.Character:FindFirstChild("Humanoid") then
            player.Character.Humanoid.WalkSpeed = speed
            addOutput("‚ö° Speed ƒë·∫∑t th√†nh " .. speed)
        end
        
    elseif command == "unsp" or command == "unspeed" then
        if player.Character and player.Character:FindFirstChild("Humanoid") then
            player.Character.Humanoid.WalkSpeed = originalWalkSpeed
            addOutput("‚ùå Speed ƒë√£ reset v·ªÅ " .. originalWalkSpeed)
        end
        
    -- WalkSpeed
    elseif command == "wsp" or command == "walkspeed" then
        local speed = tonumber(args[2]) or 16
        if player.Character and player.Character:FindFirstChild("Humanoid") then
            player.Character.Humanoid.WalkSpeed = speed
            originalWalkSpeed = speed
            addOutput("üö∂ WalkSpeed ƒë·∫∑t th√†nh " .. speed)
        end
        
    elseif command == "unwsp" or command == "unwalkspeed" then
        if player.Character and player.Character:FindFirstChild("Humanoid") then
            player.Character.Humanoid.WalkSpeed = 16
            originalWalkSpeed = 16
            addOutput("‚ùå WalkSpeed ƒë√£ reset v·ªÅ 16")
        end
        
    -- Jump
    elseif command == "jp" or command == "jump" then
        local jumpPower = tonumber(args[2]) or 100
        if player.Character and player.Character:FindFirstChild("Humanoid") then
            player.Character.Humanoid.JumpPower = jumpPower
            addOutput("ü¶ò Jump Power ƒë·∫∑t th√†nh " .. jumpPower)
        end
        
    elseif command == "unjp" or command == "unjump" then
        if player.Character and player.Character:FindFirstChild("Humanoid") then
            player.Character.Humanoid.JumpPower = originalJumpPower
            addOutput("‚ùå Jump Power ƒë√£ reset v·ªÅ " .. originalJumpPower)
        end
        
    -- ESP
    elseif command == "es" or command == "esp" then
        setESP(true)
        espEnabled = true
        addOutput("‚úÖ ESP ƒë√£ B·∫¨T")
        
    elseif command == "unes" or command == "unesp" then
        setESP(false)
        espEnabled = false
        addOutput("‚ùå ESP ƒë√£ T·∫ÆT")
        
    -- Teleport
    elseif command == "tp" or command == "teleport" then
        if args[2] then
            local targetPlayer = findPlayer(args[2])
            if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
                if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                    player.Character.HumanoidRootPart.CFrame = targetPlayer.Character.HumanoidRootPart.CFrame * CFrame.new(0, 0, 3)
                    addOutput("üìç ƒê√£ teleport ƒë·∫øn " .. targetPlayer.Name)
                end
            else
                addOutput("‚ùå Kh√¥ng t√¨m th·∫•y ng∆∞·ªùi ch∆°i: " .. args[2])
            end
        else
            addOutput("‚ùå C√°ch d√πng: tp [t√™n ng∆∞·ªùi ch∆°i]")
        end
        
    -- View
    elseif command == "v" or command == "view" then
        if args[2] then
            local targetPlayer = findPlayer(args[2])
            if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("Humanoid") then
                currentCamera.CameraSubject = targetPlayer.Character.Humanoid
                addOutput("üëÄ ƒêang xem " .. targetPlayer.Name)
            else
                addOutput("‚ùå Kh√¥ng t√¨m th·∫•y ng∆∞·ªùi ch∆°i: " .. args[2])
            end
        else
            addOutput("‚ùå C√°ch d√πng: v [t√™n ng∆∞·ªùi ch∆°i]")
        end
        
    elseif command == "unv" or command == "unview" then
        if player.Character and player.Character:FindFirstChild("Humanoid") then
            currentCamera.CameraSubject = player.Character.Humanoid
            addOutput("‚ùå ƒê√£ ng·ª´ng xem, tr·ªü v·ªÅ b·∫£n th√¢n")
        end
        
    -- Infinite Jump
    elseif command == "infj" or command == "infinitejump" then
        setInfiniteJump(true)
        infJumpEnabled = true
        addOutput("‚úÖ Infinite Jump ƒë√£ B·∫¨T")
        
    elseif command == "uninfj" or command == "uninfinitejump" then
        setInfiniteJump(false)
        infJumpEnabled = false
        addOutput("‚ùå Infinite Jump ƒë√£ T·∫ÆT")
        
    -- Fly to Player
    elseif command == "go" then
        if args[2] then
            local success = flyToPlayer(args[2], true)
            if success then
                flyEnabled = true
                addOutput("‚úàÔ∏è ƒêang bay ƒë·∫øn ng∆∞·ªùi ch∆°i: " .. args[2])
            else
                addOutput("‚ùå Kh√¥ng t√¨m th·∫•y ng∆∞·ªùi ch∆°i: " .. args[2])
            end
        else
            addOutput("‚ùå C√°ch d√πng: go [t√™n ng∆∞·ªùi ch∆°i]")
        end
        
    elseif command == "ungo" then
        flyToPlayer("", false)
        flyEnabled = false
        addOutput("‚ùå ƒê√£ ng·ª´ng bay")
        
    -- Rejoin
    elseif command == "rejoin" then
        addOutput("üîÑ ƒêang rejoin server...")
        TeleportService:Teleport(game.PlaceId, player)
        
    -- Server Hop
    elseif command == "serverhop" then
        addOutput("üåê ƒêang t√¨m server kh√°c...")
        local servers = {}
        pcall(function()
            local req = game:HttpGet("https://games.roblox.com/v1/games/" .. game.PlaceId .. "/servers/Public?sortOrder=Asc&limit=100")
            local body = game:GetService("HttpService"):JSONDecode(req)
            for i, v in next, body.data do
                if type(v) == "table" and v.maxPlayers > v.playing and v.id ~= game.JobId then
                    servers[#servers + 1] = v.id
                end
            end
        end)
        
        if #servers > 0 then
            TeleportService:TeleportToPlaceInstance(game.PlaceId, servers[math.random(1, #servers)], player)
        else
            addOutput("‚ùå Kh√¥ng t√¨m th·∫•y server kh√°c")
        end
        
    else
        addOutput("‚ùå L·ªánh kh√¥ng h·ª£p l·ªá: " .. command)
        addOutput("üìã G√µ 'help' ƒë·ªÉ xem danh s√°ch l·ªánh")
    end
end

-- Dragging functionality
header.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = mainFrame.Position
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = input.Position - dragStart
        mainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

UserInputService.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = false
    end
end)

-- Minimize/Maximize functionality
minimizeBtn.MouseButton1Click:Connect(function()
    local tween
    if isMinimized then
        -- Ph√≥ng to
        tween = TweenService:Create(mainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Quad), {Size = originalSize})
        minimizeBtn.Text = "‚àí"
        contentFrame.Visible = true
        isMinimized = false
    else
        -- Thu g·ªçn
        tween = TweenService:Create(mainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Quad), {Size = UDim2.new(0, 500, 0, 40)})
        minimizeBtn.Text = "+"
        contentFrame.Visible = false
        isMinimized = true
    end
    tween:Play()
end)

-- Close functionality
closeBtn.MouseButton1Click:Connect(function()
    -- Clean up all effects
    setNoclip(false)
    setESP(false)
    setInfiniteJump(false)
    flyToPlayer("", false)
    setNoFog(false)
    setGravity()
    
    -- Clean up visual effects
    for effectType, _ in pairs(visualEffects) do
        removeVisualEffect(effectType)
    end
    
    local tween = TweenService:Create(mainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Quad), {
        Size = UDim2.new(0, 0, 0, 0),
        Position = UDim2.new(0.5, 0, 0.5, 0)
    })
    tween:Play()
    tween.Completed:Connect(function()
        screenGui:Destroy()
    end)
end)

-- Execute command functionality
executeBtn.MouseButton1Click:Connect(function()
    local command = commandInput.Text
    if command ~= "" then
        addOutput("üìù L·ªánh: " .. command)
        processCommand(command)
        commandInput.Text = ""
    else
        addOutput("‚ö†Ô∏è Vui l√≤ng nh·∫≠p l·ªánh!")
    end
end)

-- Enter key support
commandInput.FocusLost:Connect(function(enterPressed)
    if enterPressed then
        executeBtn.MouseButton1Click:Fire()
    end
end)

-- Hover effects
local function createHoverEffect(button, normalColor, hoverColor)
    button.MouseEnter:Connect(function()
        TweenService:Create(button, TweenInfo.new(0.2), {BackgroundColor3 = hoverColor}):Play()
    end)
    
    button.MouseLeave:Connect(function()
        TweenService:Create(button, TweenInfo.new(0.2), {BackgroundColor3 = normalColor}):Play()
    end)
end

createHoverEffect(executeBtn, Color3.fromRGB(40, 167, 69), Color3.fromRGB(50, 180, 80))
createHoverEffect(minimizeBtn, Color3.fromRGB(255, 193, 7), Color3.fromRGB(255, 210, 50))
createHoverEffect(closeBtn, Color3.fromRGB(220, 53, 69), Color3.fromRGB(235, 70, 85))

-- Visual Effects for Player
local function createPlayerEffects()
    if not player.Character or not player.Character:FindFirstChild("HumanoidRootPart") then
        return
    end
    
    local rootPart = player.Character.HumanoidRootPart
    
    -- Particle Effect
    local attachment = Instance.new("Attachment")
    attachment.Parent = rootPart
    
    local particle = Instance.new("ParticleEmitter")
    particle.Texture = "rbxasset://textures/particles/sparkles_main.dds"
    particle.Lifetime = NumberRange.new(0.5, 1.0)
    particle.Rate = 50
    particle.SpreadAngle = Vector2.new(360, 360)
    particle.Speed = NumberRange.new(5, 10)
    particle.Color = ColorSequence.new{
        ColorSequenceKeypoint.new(0, Color3.fromRGB(255, 0, 255)),
        ColorSequenceKeypoint.new(0.5, Color3.fromRGB(0, 255, 255)),
        ColorSequenceKeypoint.new(1, Color3.fromRGB(255, 255, 0))
    }
    particle.Size = NumberSequence.new{
        NumberSequenceKeypoint.new(0, 0),
        NumberSequenceKeypoint.new(0.5, 1),
        NumberSequenceKeypoint.new(1, 0)
    }
    particle.Parent = attachment
    
    -- Glow Effect
    local pointLight = Instance.new("PointLight")
    pointLight.Brightness = 1
    pointLight.Color = Color3.fromRGB(0, 255, 255)
    pointLight.Range = 10
    pointLight.Parent = rootPart
    
    -- Rainbow Light Effect
    spawn(function()
        while pointLight and pointLight.Parent do
            for i = 0, 1, 0.01 do
                if pointLight and pointLight.Parent then
                    pointLight.Color = Color3.fromHSV(i, 1, 1)
                    wait(0.1)
                end
            end
        end
    end)
    
    addOutput("‚ú® Hi·ªáu ·ª©ng visual ƒë√£ ƒë∆∞·ª£c th√™m!")
end

-- Auto-create effects when player spawns
player.CharacterAdded:Connect(function()
    wait(2) -- Wait for character to fully load
    createPlayerEffects()
end)

-- Create effects for current character if exists
if player.Character then
    createPlayerEffects()
end

-- Player left detection for ESP cleanup
Players.PlayerRemoving:Connect(function(leavingPlayer)
    local esp = espFolder:FindFirstChild(leavingPlayer.Name .. "_ESP")
    if esp then
        esp:Destroy()
    end
end)

-- Help command
local function showHelp()
    local helpText = [[
üìã DANH S√ÅCH L·ªÜNH MILA COMMAND:

üîÜ LIGHTING & ENVIRONMENT:
- fb/unfb - B·∫≠t/t·∫Øt Fullbright
- nofog/unfog - B·∫≠t/t·∫Øt No Fog
- time [0-24] - ƒê·∫∑t th·ªùi gian (v√≠ d·ª•: time 12)

üåç PHYSICS:
- grty [s·ªë]/ungrty - ƒê·∫∑t/reset Gravity (v√≠ d·ª•: grty 50)

üëª MOVEMENT:
- nc/unnc - B·∫≠t/t·∫Øt Noclip
- sp [s·ªë]/unsp - ƒê·∫∑t/reset Speed
- wsp [s·ªë]/unwsp - ƒê·∫∑t/reset WalkSpeed  
- jp [s·ªë]/unjp - ƒê·∫∑t/reset Jump Power
- infj/uninfj - B·∫≠t/t·∫Øt Infinite Jump

üëÅÔ∏è VISUAL & MONITORING:
- es/unes - B·∫≠t/t·∫Øt ESP (hi·ªÉn th·ªã t√™n + kho·∫£ng c√°ch)
- v [t√™n]/unv - Xem/ng·ª´ng xem ng∆∞·ªùi ch∆°i

üìç TELEPORT & POSITION:
- tp [t√™n] - Teleport ƒë·∫øn ng∆∞·ªùi ch∆°i
- go [t√™n]/ungo - Bay ƒë·∫øn/ng·ª´ng bay ƒë·∫øn ng∆∞·ªùi ch∆°i
- savepos [t√™n] - L∆∞u v·ªã tr√≠ hi·ªán t·∫°i
- loadpos [t√™n] - T·∫£i v·ªã tr√≠ ƒë√£ l∆∞u
- getpos - L·∫•y t·ªça ƒë·ªô hi·ªán t·∫°i
- goto [x] [y] [z] - Teleport ƒë·∫øn t·ªça ƒë·ªô

‚ú® VISUAL EFFECTS:
- smoke/unsmoke - B·∫≠t/t·∫Øt hi·ªáu ·ª©ng kh√≥i
- fire/unfire - B·∫≠t/t·∫Øt hi·ªáu ·ª©ng l·ª≠a  
- trail/untrail - B·∫≠t/t·∫Øt hi·ªáu ·ª©ng trail
- glow/unglow - B·∫≠t/t·∫Øt hi·ªáu ·ª©ng √°nh s√°ng

üìä SERVER & INFO:
- serverinfo - Hi·ªÉn th·ªã th√¥ng tin server
- jobid - Hi·ªÉn th·ªã Job ID ƒë·ªÉ copy
- placeid - Hi·ªÉn th·ªã Place ID ƒë·ªÉ copy

üåê SERVER ACTIONS:
- rejoin - Rejoin server hi·ªán t·∫°i
- serverhop - Chuy·ªÉn sang server kh√°c

üí° V√ç D·ª§ S·ª¨ D·ª§NG:
- sp 50 (speed 50)
- tp john (tp ƒë·∫øn john)
- savepos home (l∆∞u v·ªã tr√≠ t√™n "home")
- goto 100 50 200 (ƒë·∫øn t·ªça ƒë·ªô x100 y50 z200)
- time 18 (ƒë·∫∑t th·ªùi gian 6 gi·ªù chi·ªÅu)
]]
    addOutput(helpText)
end

-- Add help to command processor
local originalProcessCommand = processCommand
processCommand = function(cmd)
    local command = string.lower(string.split(cmd, " ")[1])
    if command == "help" or command == "h" then
        showHelp()
    else
        originalProcessCommand(cmd)
    end
end

-- Hi·ªáu ·ª©ng xu·∫•t hi·ªán
mainFrame.Size = UDim2.new(0, 0, 0, 0)
mainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)

local appearTween = TweenService:Create(mainFrame, TweenInfo.new(0.5, Enum.EasingStyle.Back), {
    Size = UDim2.new(0, 500, 0, 400),
    Position = UDim2.new(0.5, -250, 0.5, -200)
})
appearTween:Play()

print("üåü Mila Command ƒë√£ ƒë∆∞·ª£c t·∫£i!")
addOutput("üöÄ H·ªá th·ªëng s·∫µn s√†ng! G√µ 'help' ƒë·ªÉ xem l·ªánh!")